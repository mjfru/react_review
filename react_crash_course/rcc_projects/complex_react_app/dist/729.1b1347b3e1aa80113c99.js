"use strict";(self.webpackChunkcomplex_react_app=self.webpackChunkcomplex_react_app||[]).push([[729],{729:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var l=a(540),s=a(569),n=a(149),o=a(767),r=a(976),c=a(83),m=a(598),i=a(663),u=a(953),d=a(343),p=a(306);function h(){const e=(0,o.Zp)(),t=(0,l.useContext)(d.A),a=(0,l.useContext)(p.A),{id:h}=(0,o.g)(),[f,E]=(0,l.useState)(!0),[g,w]=(0,l.useState)();if((0,l.useEffect)((()=>{const e=new AbortController;return async function(){try{const t=await c.A.get(`/post/${h}/`,{signal:e.signal});w(t.data),E(!1)}catch(e){console.log("An error has occurred."+e)}}(),()=>{e.abort()}}),[h]),!f&&!g)return l.createElement(u.A,null);if(f)return l.createElement(s.A,{title:"..."},l.createElement(n.A,null));const y=new Date(g.createdDate),N=`${y.getMonth()+1}/${y.getDate()}/${y.getFullYear()}`;return l.createElement(s.A,{title:g.title},l.createElement("div",{className:"d-flex justify-content-between"},l.createElement("h2",null,g.title),!!t.loggedIn&&t.user.username==g.author.username&&l.createElement("span",{className:"pt-2"},l.createElement(r.N_,{to:`/post/${g._id}/edit`,"data-tooltip-content":"Edit","data-tooltip-id":"edit",className:"mr-2 text-primary"},l.createElement("i",{className:"fas fa-edit"})),l.createElement(i.m_,{id:"edit",className:"custom-tooltip"})," ",l.createElement("a",{onClick:async function(){if(window.confirm("Are you sure you want to delete this post?"))try{"Success"==(await c.A.delete(`/post/${h}`,{data:{token:t.user.token}})).data&&(a({type:"flashMessage",value:"Post was succesfully deleted."}),e(`/profile/${t.user.username}`))}catch(e){console.log("There was a problem with deleting this post.")}},className:"delete-post-button text-danger","data-tooltip-content":"Delete","data-tooltip-id":"delete"},l.createElement("i",{className:"fas fa-trash"})),l.createElement(i.m_,{id:"delete",className:"custom-tooltip"}))),l.createElement("p",{className:"mb-4 text-muted small"},l.createElement(r.N_,{to:`/profile/${g.author.username}`},l.createElement("img",{className:"avatar-tiny",src:g.author.avatar})),"Posted by"," ",l.createElement(r.N_,{to:`/profile/${g.author.username}`},g.author.username)," ","on ",N),l.createElement("div",{className:"body-content"},l.createElement(m.o,{children:g.body,allowedElements:["p","br","strong","em","h1","h2","h3","h4","h5","h6"]})))}}}]);